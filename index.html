<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Vocifery</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet"
	href="http://netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css">
<link rel="stylesheet"
	href="http://vocifery.herokuapp.com/css/social-buttons.css">
<link rel="stylesheet"
	href="http://vocifery.herokuapp.com/css/bootstrap-responsive.css">
<link rel="stylesheet"
	href="http://vocifery.herokuapp.com/css/bootstrap.css">
<link
	href="http://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700,300italic,400italic,500italic,700italic"
	rel="stylesheet" type="text/css">
<link
	href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,300,400,600,700,800"
	rel="stylesheet" type="text/css">

<script src="http://vocifery.herokuapp.com/bootstrap.js"
	type="text/javascript"></script>
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"
	type="text/javascript"></script>

<style type="text/css">
/* Large desktop */
@media ( min-width : 980px) {
	body {
		padding-top: 60px;
	}
	.linediv-l {
		border-right: 1px white solid;
	}
	.linediv-r {
		border-left: 1px white solid;
	}
}

/* Landscape phones and down */
@media ( max-width : 480px) {
	.copy {
		padding: 2.5% 10%;
	}
	.linediv-l {
		border-bottom: 1px white solid;
	}
	.linediv-r {
		border-top: 1px white solid;
	}
}

/* All form factors */

/* Main body and headings */
body {
	font-family: 'Open Sans', Helvetica, Arial, sans-serif;
}

.heading,.subheading {
	font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
	text-align: center;
}

p.lead {
	padding-top: 1.5%;
	font-size: 24px;
	line-height: 30px;
}

p {
	font-size: 18px;
	line-height: 24px;
}

/* Video pitch and Action */
.pitch {
	padding: 2.5% 0%;
}

.order {
	padding: 2% 0%;
}

.actions {
	background-color: #343434;
	padding: 3% 0%;
}

.video,.thermometer,.order,.social,.statistics {
	text-align: center;
}

.statistics h3,.statistics p {
	color: white;
}

/* Marketing Copy and Footer */
.copy {
	padding-top: 2.5%;
	padding-bottom: 2.5%;
	text-align: justify;
}

.asset {
	padding: 2.5% 0%;
}

.footer {
	color: #cccccc;
	text-align: center;
}

.footer p {
	font-size: 11px;
}

.footer a {
	color: #ccccff;
}

.jumbotron {
	margin: 80px 0;
	text-align: center;
}

.jumbotron h1 {
	font-size: 100px;
	line-height: 1;
}

.jumbotron .lead {
	font-size: 24px;
	line-height: 1.25;
}

.question-icon {
	width: 48px;
	height: 48px;
}
</style>

<script type="text/javascript">
	var questionTypes = "when|where|why|who|whom|what|which|how"
	var pattern = new RegExp("^(" + questionTypes + ")(.+)\\?$", "i");
	function validateQuestion(question) {
		if (!pattern.test(question)) {
			alert("Question must begin with one of " + questionTypes
					+ " and end with question mark.");
			return false;
		}
		return true;
	}
</script>

</head>
<body>

	<!-- We use row-fluid inside containers to achieve a resizable layout. -->
	<!-- blogs.endjin.com/2013/04/tips-for-implementing-responsive-designs-using-bootstrap/ -->
	<!-- http://stackoverflow.com/a/12270322 -->
	<div class="container">

		<div class="masthead">
			<h3 class="muted">Vocifery</h3>
		</div>

		<!-- Jumbotron -->
		<div class="jumbotron">
			<p class="lead">
				<img src="http://vocifery.appspot.com/images/FAQ-icon.png"
					class="question-icon" alt="" />
			<form action="http://vocifery.appspot.com/ask" id="query"
				name="query" class="form-search">
				<input class="span8" type="text" maxlength="256" name="question" />
				<input class="span2 btn" type="submit" value="Ask" />
			</form>
			</p>
		</div>

		<div class="row-fluid section1">
			<div class="span6 offset1">
				<p id="search-result"></p>
			</div>
			<div class="span4">
				<p id="search-log"></p>
			</div>
		</div>

		<div class="row-fluid pitch">
			<div class="span5 offset1">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
					Donec porta, dui sagittis hendrerit rutrum, nunc leo tempus nisl,
					eu mollis justo velit at nunc. Fusce nec egestas sem. Donec
					fringilla ante lectus, a pellentesque lacus dignissim ac. Sed
					volutpat lorem ut congue malesuada. In facilisis scelerisque turpis
					sed lacinia. Donec in orci lectus. Donec auctor semper quam, eget
					rhoncus purus fringilla id. Phasellus id nibh eu risus ultrices
					adipiscing. Lorem ipsum dolor sit amet, consectetur adipiscing
					elit. Donec porta, dui sagittis hendrerit rutrum, nunc leo tempus
					nisl, eu mollis justo velit at nunc. Fusce nec egestas sem. Donec
					fringilla.</p>
			</div>

			<!-- We define a new 'actions' div to contain statistics, order, and share buttons.-->
			<div class="span5 actions">
				<div class="span8 offset2">
					<div class="statistics">
						<div class="span4">
							<!-- linediv-l and linediv-r give dividing lines that look
                different in horizontal and vertical layouts, illustrating
                media queries. -->
							<div class="linediv-l">
								<h3>1000</h3>
								<p>backers</p>
							</div>
						</div>
						<div class="span4">
							<div class="linediv-c">
								<h3>$6000</h3>
								<p>of $10,000</p>
							</div>
						</div>
						<div class="span4">
							<div class="linediv-r">
								<h3>10</h3>
								<p>days left</p>
							</div>
						</div>
					</div>
				</div>
				<div class="span10 offset1">
					<!-- Bootstrap progress bar -->
					<!-- http://twitter.github.io/bootstrap/components.html#progress -->
					<div class="thermometer progress active">
						<div class="bar bar-success" style="width: 60%;"></div>
						<div class="bar bar-warning" style="width: 40%;"></div>
					</div>
				</div>
				<div class="span6 offset3 order">
					<!-- Standard Bootstrap button. -->
					<!-- http://twitter.github.io/bootstrap/base-css.html#buttons -->
					<button class="btn btn-success btn-large">Preorder</button>
				</div>
				<div class="span8 offset2 social">
					<!-- Social buttons are not included in default Bootstrap. -->
					<!-- See: http://noizwaves.github.io/bootstrap-social-buttons -->
					<button class="btn btn-twitter">
						<i class="icon-twitter"></i> | Twitter
					</button>
					<button class="btn btn-facebook">
						<i class="icon-facebook"></i> | Facebook
					</button>
				</div>
			</div>
		</div>

		<!-- Not crucial, but we put this under a CC By-SA 3.0 license. -->
		<!-- http://creativecommons.org/licenses/ -->
		<div class="row-fluid footer">
			<div class="span12">
				<p>
					This work is licensed under the <a
						href="http://creativecommons.org/licenses/by-sa/3.0/">CC By-SA
						3.0 </a>, without all the cruft that would otherwise be put at the
					bottom of the page.
				</p>
			</div>
		</div>

	</div>

	<script type="text/javascript">
		var request;

		$(document).on("searchComplete", onSearchComplete);
		function onSearchComplete(e) {
			var json = e.message;
			var url = "http://vocifery.appspot.com/think";
			$.post("think", {
				corpus : json
			}).done(function(data) {
				var candidates = data.candidates;
				var log = $("#search-log");
				log.empty();
				for ( var i = 0; i < candidates.length; i++) {
					log.append(candidates[i] + "<br/>");
				}
			});
		}

		$("#query").submit(
				function(event) {
					var $form = $(this), term = $form.find(
							'input[name="question"]').val(), url = $form
							.attr('action');

					if (!validateQuestion(term)) {
						event.preventDefault();
						return false;
					}

					if (request) {
						request.abort();
					}
					event.preventDefault();
					$("#search-result").html("<h2>Searching ...</h2>");

					var posting = $.post(url, {
						question : term
					});
					posting.done(function(data) {
						$("#search-result").empty().html("<ul>")
						var list = $("#search-result").find("ul");

						var feeds = data.feeds;
						for ( var i = 0; i < feeds.length; i++) {
							var feed = feeds[i];
							var source = feed.source;
							var snippets = feed.snippets;
							for ( var j = 0; j < snippets.length; j++) {
								var snippet = snippets[j];
								list.append("<li>(Source: " + source
										+ ") <a href='" + snippet.a + "'>"
										+ snippet.a + "</a><br/>" + snippet.b
										+ "</li>");
							}
						}
						$("#search-result").append("</ul>");

						$.event.trigger({
							type : "searchComplete",
							message : JSON.stringify(data),
							time : new Date()
						});
					});
					
					return false;
				});
	</script>

</body>
</html>
